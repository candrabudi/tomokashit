import{_ as ne}from"./index-RbNKen11.js";import{d as T,r as C,bk as E,o as t,c as u,a as x,v as O,t as $,f as c,ay as se,b as e,a8 as J,F as S,g as B,s as v,n as ae,bo as V,h as R,u as H,x as N,bp as K,bl as re,bm as le,w as f,E as ie,aT as ce,q as Q,bq as W,br as ue,ag as A,bs as me,bt as de,V as _e,bu as ge,a6 as pe,bv as fe,bw as he,k as D,e as q,_ as ve,l as ye,aH as be,aC as xe,L as we,J as Ie,ae as ke,bx as Ce,M as Le,by as $e}from"./index-QJ1DP7so.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-CLXyvv53.js";import{_ as Y}from"./gameItem.vue_vue_type_script_setup_true_lang-DgMzDE8q.js";import{u as Z}from"./useScrollNode-DeCbJBqw.js";import{d as Se}from"./debounce-CjT1fh4c.js";import{_ as Be}from"./category.vue_vue_type_script_setup_true_lang-CsZPBeyo.js";import{_ as Me}from"./gameNavigation.vue_vue_type_script_setup_true_lang-BDowO4qR.js";import{_ as Ve}from"./searchInput.vue_vue_type_script_setup_true_lang-D84QRyvj.js";import"./effect-coverflow-D7VrIAMs.js";import"./detail.vue_vue_type_script_setup_true_lang-o17iJPcR.js";import"./index.vue_vue_type_script_setup_true_lang-DkQA8Gtg.js";import"./local-storage-DvcoHDty.js";const Ne={class:"mb-10 h-30 flex items-center pr-5"},Te=["src","alt"],Ge={class:"text-18 font-bold"},F=T({__name:"gameCategoryMain",props:{list:{},title:{},icon:{},moreText:{}},setup(w){const o=w,_=C(null),i=Z(_,{behavior:"smooth"});return(s,m)=>{const g=X,p=E("drag-scroll");return t(),u("div",null,[x("div",Ne,[o.icon?(t(),u("img",{key:0,class:"mr-10 h-24 w-24",src:o.icon,alt:o.title},null,8,Te)):O("",!0),x("div",Ge,$(o.title),1),c(g,se({class:"ml-auto"},e(i)),null,16)]),J((t(),u("div",{ref_key:"scrollNode",ref:_,class:"w-full flex overflow-x-auto scrollbar-hide"},[(t(!0),u(S,null,B(o.list,(h,a)=>(t(),v(Y,{key:h.id,"game-info":h,class:ae(["flex-shrink-0",{"mr-10":a<o.list.length-1}]),width:e(V)(150*h.uiColumn),height:e(V)(200),"show-online-num":""},null,8,["game-info","class","width","height"]))),128))])),[[p]])])}}}),De="/assets/image/logo_gray.png",He={class:"mt-10 h-40 flex items-center justify-between pr-5"},Pe={class:"text-18 font-bold"},qe=["onClick"],Oe=x("div",{class:"h-full w-full flex items-center justify-center"},[x("img",{class:"block w-40",src:De,alt:"error"})],-1),Re=T({__name:"barndList",props:{list:{}},setup(w){const o=R(),_=w,{t:i}=H(),s=C(null),m=Z(s,{behavior:"smooth"});N(()=>_.list.length,()=>{ce(()=>{m.measure()})}),K(()=>{m.measure()});function g(p){o.push({path:"/game/list",query:{id:p.id}})}return(p,h)=>{const a=X,I=ie,b=E("drag-scroll");return t(),u("div",null,[x("div",He,[x("div",Pe,$(e(i)("home.game.supplier")),1),c(a,re(le(e(m))),null,16)]),J((t(),u("div",{ref_key:"containerNode",ref:s,class:"mt-10 w-full flex overflow-x-auto scrollbar-hide"},[(t(!0),u(S,null,B(_.list,y=>(t(),u("div",{key:y.id,class:"mr-10 h-60 w-150 flex-shrink-0 cursor-pointer overflow-hidden rd-10 bg-paper",onClick:k=>g(y)},[c(I,{class:"h-full w-full",src:y.img,alt:y.title,fit:"contain"},{error:f(()=>[Oe]),_:2},1032,["src","alt"])],8,qe))),128))])),[[b]])])}}}),Ue=T({name:"GameHome",__name:"home",emits:["categoryChange"],setup(w,{emit:o}){const _=o,i=Q(),s=W(),m=R(),{t:g}=H(),p=C([]);h();function h(){ue().then(({data:d})=>{p.value=d.list})}const a=C([]);function I(){if(i.isLogin)return me({lang:i.userInfo.language,currency:i.userInfo.currency}).then(({data:d})=>{a.value=d.list})}let b=!1;K(()=>{b&&(I(),k()),b=!0});const y=C([]);function k(){return de({lang:i.userInfo.language,currency:i.userInfo.currency}).then(({data:d})=>{y.value=d.list})}A.showLoading(),Promise.allSettled([I(),k()]).finally(()=>{A.hideLoading()});function M(d){_("categoryChange",d)}function P(d){var n,r,L;return((L=(r=(n=s.gameMenu)==null?void 0:n.find)==null?void 0:r.call(n,G=>G.id===d.categoryId))==null?void 0:L.imgColorUrl)||""}return(d,n)=>(t(),u("div",null,[e(i).isLogin&&e(a).length?(t(),v(F,{key:0,class:"mt-30",title:e(g)("home.game.history"),icon:"/assets/icon/game_history.svg",list:e(a),onMore:n[0]||(n[0]=r=>e(m).push("/game/history"))},null,8,["title","list"])):O("",!0),(t(!0),u(S,null,B(e(y),r=>(t(),v(F,{key:r.categoryId,class:"mt-30",title:r.categoryTitle,icon:P(r),list:r.list,onMore:L=>M(r.categoryId)},null,8,["title","icon","list","onMore"]))),128)),c(Re,{class:"mt-20",list:e(p)},null,8,["list"])]))}}),je={class:"flex items-center justify-end pb-10px text-24px"},ze=T({__name:"gameList",props:{categoryId:{},scrollTop:{type:Function}},setup(w){const o=w,_=Q(),{t:i}=H(),s=_e({categoryId:ge(()=>o.categoryId),gameId:0,orderByDim:0,currency:_.userInfo.currency,pageSize:40}),{data:m,loading:g,finished:p,empty:h,error:a,loadNextPage:I,reload:b,pagination:y}=pe(fe,{params:s,loadMore:!0});N(()=>o.categoryId,()=>{s.gameId=0,s.orderByDim=0});const k=C([]);N(()=>o.categoryId,()=>{o.categoryId!==void 0&&Ce({categoryId:o.categoryId}).then(({data:n})=>{k.value=n.options})},{immediate:!0});const M=C([]);he().then(({data:n})=>{M.value=n.options});const P=D(()=>{const n=k.value.find(r=>r.value===s.gameId);return(n==null?void 0:n.label)||i("home.game.filterAllText")}),d=D(()=>{const n=M.value.find(r=>r.value===s.orderByDim);return(n==null?void 0:n.label)||i("home.game.filterAllText")});return N(s,Se(()=>{var n;b(),(n=o==null?void 0:o.scrollTop)==null||n.call(o)},100)),(n,r)=>{const L=ve,G=ye,U=be,j=xe,ee=we,te=Ie,oe=ke;return t(),u("div",null,[x("div",je,[c(j,{modelValue:e(s).gameId,"onUpdate:modelValue":r[0]||(r[0]=l=>e(s).gameId=l),placement:"bottom-start","close-on-click-reference":""},{options:f(()=>[(t(!0),u(S,null,B(e(k),l=>(t(),v(U,{key:l.value,value:l.value},{default:f(()=>[q($(l.label)+" ("+$(l.count)+") ",1)]),_:2},1032,["value"]))),128))]),default:f(()=>[c(G,{class:"block h-36 rd-10 bg-paper"},{default:f(()=>[q($(e(P))+" ",1),c(L,{name:"chevron-down",class:"text-16"})]),_:1})]),_:1},8,["modelValue"]),c(j,{modelValue:e(s).orderByDim,"onUpdate:modelValue":r[1]||(r[1]=l=>e(s).orderByDim=l),placement:"bottom-end","close-on-click-reference":""},{options:f(()=>[(t(!0),u(S,null,B(e(M),l=>(t(),v(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),default:f(()=>[c(G,{class:"ml-14 block h-36 rd-10 bg-paper"},{default:f(()=>[q($(e(d))+" ",1),c(L,{name:"chevron-down",class:"text-16"})]),_:1})]),_:1},8,["modelValue"])]),c(oe,{loading:e(g),finished:e(p),empty:e(h),error:e(a),"load-more":"","data-count":e(m).length,pagination:e(y),onMore:e(I)},{default:f(()=>[c(te,{gutter:[10,10]},{default:f(()=>[(t(!0),u(S,null,B(e(m),(l,z)=>(t(),v(ee,{key:z,span:l.uiColumn===2?6:3},{default:f(()=>[l?(t(),v(Y,{key:0,class:"mt-20","game-info":l,width:z===0&&l.uiColumn===2?e(V)(294):e(V)(142),height:e(V)(190),"show-online-num":""},null,8,["game-info","width","height"])):O("",!0)]),_:2},1032,["span"]))),128))]),_:1})]),_:1},8,["loading","finished","empty","error","data-count","pagination","onMore"])])}}}),Ae={class:"pb-20"},Fe={class:"mt-30 flex items-center justify-between overflow-hidden"},at=T({name:"PageGame",__name:"index",setup(w){const o=W(),{t:_}=H(),i=Le(),s=D(()=>{var a;return(a=i.params)!=null&&a.gameId?+i.params.gameId:0}),m=R();function g(a){m.replace({params:{gameId:a}})}N(()=>s.value,()=>{g(s.value)});const p=D(()=>[{id:0,name:"",title:_("home.game.hall"),imgUrl:"/assets/icon/icon_Live casino.png"},...o.gameMenu]);function h(a){a&&m.push({path:"/game/search",query:{keyword:a}})}return(a,I)=>{const b=ne;return t(),u("div",Ae,[c(b),c(Me),x("div",Fe,[c(Be,{"model-value":e(s),class:"mr-30 bg-paper",menus:e(p),"onUpdate:modelValue":g},null,8,["model-value","menus"]),c(Ve,{class:"max-w-350 min-w-200 flex-1",onSearch:h})]),(t(),v($e,{include:"GameHome"},[e(s)===0?(t(),v(Ue,{key:0,onCategoryChange:g})):(t(),v(ze,{key:1,class:"mt-20","category-id":e(s)},null,8,["category-id"]))],1024))])}}});export{at as default};
