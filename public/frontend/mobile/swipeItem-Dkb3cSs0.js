import{dk as De,d as Ae,c as ne,aW as G,y as We,q as Fe,o as w,l as S,n as Ye,r as k,s as c,a7 as V,D as I,w as C,x as b,az as Q,aX as X,m as Z,F as Ue,p as Le,aY as Xe,e as ae,cT as Me,d5 as Re,cI as Ve,f as m,g as q,dO as qe,cJ as He,cK as Ke,h as E,z as _,a3 as Oe,dN as je,dp as Je,t as te,cM as M,dq as R,cL as x,cW as Ge,cN as Qe,j as ie,k as Ze,dl as _e}from"./index-kWXyNMgS.js";import{e as xe}from"./logger-RF2tOY5E.js";const le=Symbol("SWIPE_BIND_SWIPE_ITEM_KEY");function en(){const{childProviders:e,length:i,bindChildren:a}=De(le);return{length:i,swipeItems:e,bindSwipeItems:a}}const oe={loop:{type:Boolean,default:!0},autoplay:[String,Number],duration:{type:[String,Number],default:300},initialIndex:{type:[String,Number],default:0},navigation:{type:[Boolean,String],default:!1},indicator:{type:Boolean,default:!0},indicatorColor:String,vertical:Boolean,touchable:{type:Boolean,default:!0},onChange:Ae()};var T=(e,i,a)=>new Promise((p,s)=>{var t=f=>{try{l(a.next(f))}catch(h){s(h)}},d=f=>{try{l(a.throw(f))}catch(h){s(h)}},l=f=>f.done?p(f.value):Promise.resolve(f.value).then(t,d);l((a=a.apply(e,i)).next())});const nn=250,an=20,{name:tn,n:ee,classes:ln}=ne("swipe"),on=["onClick"];function rn(e,i){const a=G("var-icon"),p=G("var-button"),s=We("hover");return Fe((w(),S("div",{class:c(e.n()),ref:"swipeEl"},[Ye("div",{class:c(e.classes(e.n("track"),[e.vertical,e.n("--vertical")])),style:V({width:e.vertical?void 0:e.toSizeUnit(e.trackSize),height:e.vertical?e.toSizeUnit(e.trackSize):void 0,transform:"translate".concat(e.vertical?"Y":"X","(").concat(e.toSizeUnit(e.trackTranslate),")"),transitionDuration:e.lockDuration?"0ms":"".concat(e.toNumber(e.duration),"ms")}),onTouchstart:i[0]||(i[0]=(...t)=>e.handleTouchstart&&e.handleTouchstart(...t)),onTouchmove:i[1]||(i[1]=(...t)=>e.handleTouchmove&&e.handleTouchmove(...t)),onTouchend:i[2]||(i[2]=(...t)=>e.handleTouchend&&e.handleTouchend(...t))},[k(e.$slots,"default")],38),e.navigation?k(e.$slots,"prev",X(Z({key:0},{index:e.index,length:e.length,prev:e.prev,next:e.next,to:e.to,hovering:e.hovering})),()=>[I(Q,{name:e.getNavigationAnimation("prev")},{default:C(()=>[e.navigation===!0||e.hovering?(w(),S("div",{key:0,class:c(e.classes(e.n("navigation"),e.n("navigation-prev"),[e.vertical,e.n("--navigation-vertical-prev")]))},[I(p,{"var-swipe-cover":"",disabled:!e.loop&&e.index===0,class:c(e.n("navigation-prev-button")),onClick:i[3]||(i[3]=t=>e.prev())},{default:C(()=>[I(a,{"var-swipe-cover":"",class:c(e.n("navigation-prev-button-icon")),name:e.vertical?"chevron-up":"chevron-left"},null,8,["class","name"])]),_:1},8,["disabled","class"])],2)):b("v-if",!0)]),_:1},8,["name"])]):b("v-if",!0),e.navigation?k(e.$slots,"next",X(Z({key:1},{index:e.index,length:e.length,hovering:e.hovering,prev:e.prev,next:e.next,to:e.to})),()=>[I(Q,{name:e.getNavigationAnimation("next")},{default:C(()=>[e.navigation===!0||e.hovering?(w(),S("div",{key:0,class:c(e.classes(e.n("navigation"),e.n("navigation-next"),[e.vertical,e.n("--navigation-vertical-next")]))},[I(p,{"var-swipe-cover":"",class:c(e.n("navigation-next-button")),disabled:!e.loop&&e.index===e.length-1,onClick:i[4]||(i[4]=t=>e.next())},{default:C(()=>[I(a,{"var-swipe-cover":"",class:c(e.n("navigation-next-button-icon")),name:e.vertical?"chevron-down":"chevron-right"},null,8,["class","name"])]),_:1},8,["class","disabled"])],2)):b("v-if",!0)]),_:1},8,["name"])]):b("v-if",!0),k(e.$slots,"indicator",X(Xe({index:e.index,length:e.length,hovering:e.hovering,prev:e.prev,next:e.next,to:e.to})),()=>[e.indicator&&e.length?(w(),S("div",{key:0,class:c(e.classes(e.n("indicators"),[e.vertical,e.n("--indicators-vertical")]))},[(w(!0),S(Ue,null,Le(e.length,(t,d)=>(w(),S("div",{class:c(e.classes(e.n("indicator"),[e.index===d,e.n("--indicator-active")],[e.vertical,e.n("--indicator-vertical")])),style:V({background:e.indicatorColor}),key:t,onClick:l=>e.to(d)},null,14,on))),128))],2)):b("v-if",!0)])],2)),[[s,e.handleHovering]])}const re=ae({name:tn,directives:{Hover:Me},components:{VarButton:Re,VarIcon:Ve},props:oe,setup(e){const i=m(null),a=m(0),p=q(()=>e.vertical),s=m(0),t=m(0),d=m(!1),l=m(0),f=m(!1),{swipeItems:h,bindSwipeItems:B,length:o}=en(),{popup:K,bindPopup:ue}=qe(),{deltaX:ve,deltaY:de,moveX:fe,moveY:ce,offsetX:he,offsetY:me,touching:O,direction:pe,startTime:ge,startTouch:we,moveTouch:Se,endTouch:Ie}=He(),j=q(()=>pe.value===(e.vertical?"vertical":"horizontal"));let J=!1,D=-1;B({size:a,currentIndex:l,vertical:p}),Ke(()=>window,"keydown",Ce),E(ue,null),_(()=>o.value,()=>T(this,null,function*(){yield R(),Y(),y()})),K&&_(()=>K.show.value,n=>T(this,null,function*(){n?(yield R(),y()):$()})),Oe(y),je($),Je(y);function g(n){return h.find(({index:r})=>r.value===n)}function Te(){e.loop&&(t.value>=0&&g(o.value-1).setTranslate(-s.value),t.value<=-(s.value-a.value)&&g(0).setTranslate(s.value),t.value>-(s.value-a.value)&&t.value<0&&(g(o.value-1).setTranslate(0),g(0).setTranslate(0)))}function A(n){const r=Ge(n)?n:Math.floor((t.value-a.value/2)/-a.value),{loop:u}=e;return r<=-1?u?-1:0:r>=o.value?u?o.value:o.value-1:r}function ye(n){const{loop:r}=e;return n===-1?r?o.value-1:0:n===o.value?r?0:o.value-1:n}function W(n){return e.loop?n<0?o.value+n:n>=o.value?n-o.value:n:Qe(n,0,o.value-1)}function F(){return T(this,null,function*(){const n=t.value>=a.value,r=t.value<=-s.value,u=0,v=-(s.value-a.value);d.value=!0,(n||r)&&(d.value=!0,t.value=r?u:v,g(0).setTranslate(0),g(o.value-1).setTranslate(0)),yield R(),d.value=!1})}function Y(){J||(l.value=W(M(e.initialIndex)),J=!0)}function U(){const{autoplay:n}=e;!n||o.value<=1||($(),D=window.setTimeout(()=>{z(),U()},M(n)))}function $(){D&&clearTimeout(D)}function be(n){return T(this,null,function*(){o.value<=1||!e.touchable||(we(n),$(),yield F(),d.value=!0)})}function ke(n){const{touchable:r,vertical:u}=e;!O.value||!r||(Se(n),j.value&&(x(n),t.value+=u?ce.value:fe.value,Te()))}function $e(){if(!O.value||(Ie(),!j.value))return;const{vertical:n,onChange:r}=e,u=n?de.value<0:ve.value<0,v=n?me.value:he.value,P=performance.now()-ge.value<=nn&&v>=an?A(u?l.value+1:l.value-1):A();d.value=!1,t.value=P*-a.value;const Be=l.value;l.value=ye(P),U(),Be!==l.value&&E(r,l.value)}function ze(n){e.navigation==="hover"&&(f.value=n)}function Pe(n){return e.navigation!=="hover"?"":ee("--navigation".concat(e.vertical?"-vertical":"","-").concat(n,"-animation"))}function Ce(n){if(!h.length||h.findIndex(({isFocusing:v})=>v.value)===-1)return;const{key:u}=n;x(n),u==="ArrowLeft"&&L(),u==="ArrowRight"&&z()}function y(){i.value&&(d.value=!0,a.value=e.vertical?i.value.offsetHeight:i.value.offsetWidth,s.value=a.value*o.value,t.value=l.value*-a.value,h.forEach(n=>{n.setTranslate(0)}),U(),setTimeout(()=>{d.value=!1}))}function z(n){return T(this,null,function*(){if(o.value<=1)return;Y();const{loop:r,onChange:u}=e,v=l.value;if(l.value=W(v+1),(n==null?void 0:n.event)!==!1&&E(u,l.value),yield F(),v===o.value-1&&r){g(0).setTranslate(s.value),t.value=o.value*-a.value;return}v!==o.value-1&&(t.value=l.value*-a.value)})}function L(n){return T(this,null,function*(){if(o.value<=1)return;Y();const{loop:r,onChange:u}=e,v=l.value;if(l.value=W(v-1),(n==null?void 0:n.event)!==!1&&E(u,l.value),yield F(),v===0&&r){g(o.value-1).setTranslate(-s.value),t.value=a.value;return}v!==0&&(t.value=l.value*-a.value)})}function Ee(n,r){if(o.value<=1||n===l.value)return;n=n<0?0:n,n=n>=o.value?o.value:n;const u=n>l.value?z:L,v=Math.abs(n-l.value);Array.from({length:v}).forEach((Ne,P)=>{u({event:P===v-1?r==null?void 0:r.event:!1})})}return{length:o,index:l,swipeEl:i,trackSize:s,trackTranslate:t,lockDuration:d,hovering:f,n:ee,toSizeUnit:te,classes:ln,handleTouchstart:be,handleTouchmove:ke,handleTouchend:$e,next:z,prev:L,to:Ee,resize:y,toNumber:M,handleHovering:ze,getNavigationAnimation:Pe}}});re.render=rn;var N=re;ie(N);Ze(N,oe);const pn=N;var gn=N;function sn(){const{bindParent:e,index:i,parentProvider:a}=_e(le);return e||xe("SwipeItem","<var-swipe-item/> must in <var-swipe/>"),{index:i,swipe:a,bindSwipe:e}}const{name:un,n:vn}=ne("swipe-item"),dn=["aria-hidden"];function fn(e,i){return w(),S("div",{class:c(e.n()),style:V({width:e.vertical?void 0:e.toSizeUnit(e.size),height:e.vertical?e.toSizeUnit(e.size):void 0,transform:"translate".concat(e.vertical?"Y":"X","(").concat(e.toSizeUnit(e.translate),")")}),tabindex:"-1","aria-hidden":e.currentIndex!==e.index,onFocus:i[0]||(i[0]=a=>e.isFocusing=!0),onBlur:i[1]||(i[1]=a=>e.isFocusing=!1)},[k(e.$slots,"default")],46,dn)}const se=ae({name:un,setup(){const e=m(0),i=m(!1),{swipe:a,bindSwipe:p,index:s}=sn(),{size:t,currentIndex:d,vertical:l}=a,f={index:s,isFocusing:q(()=>i.value),setTranslate:h};p(f);function h(B){e.value=B}return{isFocusing:i,size:t,index:s,currentIndex:d,vertical:l,translate:e,n:vn,toSizeUnit:te}}});se.render=fn;var H=se;ie(H);const wn=H;var Sn=H;export{wn as _,pn as a,Sn as b,oe as p,gn as s};
