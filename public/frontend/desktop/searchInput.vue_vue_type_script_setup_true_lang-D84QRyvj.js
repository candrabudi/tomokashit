import{d as R,R as F,S as I,r as h,u as K,x as g,o as r,s as _,w as y,a as l,t as i,b as s,c as d,v as p,F as P,g as T,e as j,f as D,Y as E,ay as L,dt as O,$ as U,_ as Y,d_ as q}from"./index-QJ1DP7so.js";import{l as w}from"./local-storage-DvcoHDty.js";const z="/assets/icon/search.svg",A=l("img",{class:"ml-6 mr-20 h-20 w-20",src:z,alt:"search"},null,-1),G=["placeholder","value"],J={class:"rd-10 bg-paper p-20"},Q={class:"text-center text-14 font-bold"},W={key:0,class:"mt-20 flex justify-between"},X={key:1,class:"flex flex-wrap"},Z=["onClick"],x="home_game_search_history",se=R({__name:"searchInput",props:{modelValue:{type:String,default:""},modelModifiers:{}},emits:F(["search"],["update:modelValue"]),setup(k,{emit:b}){const a=I(k,"modelValue"),C=b,c=h(!1),{t:u}=K();function v(e){e.target.value.length<3||(a.value=e.target.value,C("search",a.value),S(a.value),c.value=!1)}const m=h();g(()=>a.value,()=>{m.value&&(m.value.value=a.value)});function V(){a.value=""}const t=h(w.get(x)||[]);function S(e){if((e==null?void 0:e.length)<3)return;const o=t.value.indexOf(e);o!==-1&&t.value.splice(o,1),t.value.unshift(e)}g(()=>t.value.length,()=>{w.set(x,t.value)});function H(e){v({target:{value:e}})}function N(e){t.value.splice(e,1)}return(e,o)=>{const f=Y,$=q;return r(),_($,{show:s(c),"onUpdate:show":o[2]||(o[2]=n=>U(c)?c.value=n:null),placement:"bottom","same-width":"","offset-y":"10px",elevation:!1},{menu:y(()=>[l("div",J,[l("div",Q,i(s(u)("home.game.searchTips")),1),s(t).length?(r(),d("div",W,[l("div",null,i(s(u)("home.game.searchHistory")),1),l("div",{class:"cursor-pointer color-text-sub",onClick:o[1]||(o[1]=n=>s(t).length=0)},i(s(u)("home.game.clearHistory"))+" ("+i(s(t).length)+") ",1)])):p("",!0),s(t).length?(r(),d("div",X,[(r(!0),d(P,null,T(s(t),(n,M)=>(r(),d("div",{key:n,class:"mr-20 mt-10 h-26 flex cursor-pointer items-center rd-13 bg-body px-10 text-12 leading-26",onClick:B=>H(n)},[j(i(n)+" ",1),D(f,{name:"window-close",class:"ml-10 text-14",onClick:E(B=>N(M),["stop"])},null,8,["onClick"])],8,Z))),128))])):p("",!0)])]),default:y(()=>[l("div",L({class:"h-40 flex items-center rd-20 bg-paper p-10"},e.$attrs),[A,l("input",{ref_key:"inputNode",ref:m,class:"h-full flex-1 b-none bg-blue bg-transparent text-14 outline-none placeholder:color-[rgba(31,39,52,0.3)]",type:"text",placeholder:s(u)("home.game.searchPlaceholder"),value:a.value,onFocus:o[0]||(o[0]=n=>c.value=!0),onKeydown:O(v,["enter"])},null,40,G),a.value?(r(),_(f,{key:0,name:"close-circle",class:"cursor-pointer text-16",onClick:V})):p("",!0)],16)]),_:1},8,["show"])}}});export{se as _};
